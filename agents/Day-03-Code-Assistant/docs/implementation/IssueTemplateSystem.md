# Issue Template System

This document provides details about the implementation of the Issue Template System in the Code Assistant project.

## Table of Contents

1. [Overview](#overview)
2. [Implementation Details](#implementation-details)
3. [Usage](#usage)
4. [Customization](#customization)
5. [Future Improvements](#future-improvements)

## Overview

The Issue Template System is a component of the Code Assistant that allows for the customization of GitHub issue formats. It uses a template file to define the structure and content of issues created from analysis findings, providing a consistent and professional appearance for all issues.

## Implementation Details

The Issue Template System is implemented as part of the `IssueManagementSystem` component. It loads a template file from disk and applies it to findings when creating GitHub issues.

### Key Components

#### Template Loading

The template is loaded from a file on disk:

```javascript
async loadIssueTemplate() {
  try {
    // Try to load template from file
    const templatePath = path.join(this.config.templatePath, 'issue_template.md');
    
    try {
      this.template = await fs.readFile(templatePath, 'utf8');
      console.log('Loaded issue template from file');
    } catch (error) {
      console.warn(`Could not load issue template: ${error.message}`);
      this.template = this.getDefaultIssueTemplate();
    }
  } catch (error) {
    console.warn(`Error loading issue template: ${error.message}`);
    // Use default template
    this.template = this.getDefaultIssueTemplate();
  }
}
```

#### Default Template

If the template file cannot be loaded, a default template is used:

```javascript
getDefaultIssueTemplate() {
  return `# {title}

## Issue Description

{description}

## Location

{location}

## Suggested Solution

{suggestion}

## Priority

**{priority}**

---
*This issue was automatically generated by the Repository Analysis Agent.*`;
}
```

#### Template Application

The template is applied to findings using a simple placeholder replacement system:

```javascript
applyTemplate(template, values) {
  // Replace placeholders in template with actual values
  let result = template;
  
  for (const [key, value] of Object.entries(values)) {
    result = result.replace(new RegExp(`\\{${key}\\}`, 'g'), value);
  }
  
  return result;
}
```

### Issue Body Creation

The template is used to create issue bodies for both file-specific and repository-level issues:

```javascript
createFileIssueBody(finding) {
  // Create a body for a file-specific issue
  if (!this.template) {
    // If template is not loaded yet, use the default template
    this.template = this.getDefaultIssueTemplate();
  }
  
  // Create location string for file-specific issues
  const location = `File: \`${finding.filePath}\`\n${finding.location ? `Location: ${finding.location}` : ''}`;
  
  // Apply template
  return this.applyTemplate(this.template, {
    title: finding.title,
    description: finding.description,
    location: location,
    suggestion: finding.suggestion,
    priority: finding.priority
  });
}
```

## Usage

The Issue Template System is used automatically by the `IssueManagementSystem` when creating issues. The template is loaded during initialization and applied to findings when formatting issues.

To use a custom template, place a file named `issue_template.md` in the `templates` directory. The template should include placeholders for the following values:

- `{title}`: The title of the issue
- `{description}`: The description of the finding
- `{location}`: The location of the issue (file path and line numbers for file issues, affected area for repository issues)
- `{suggestion}`: The suggested solution for the issue
- `{priority}`: The priority level of the issue

## Customization

The Issue Template System can be customized in several ways:

1. **Custom Template File**: Create a custom template file in the `templates` directory
2. **Template Path**: Specify a custom template path in the configuration
3. **Template Format**: Modify the template format to include additional information or styling

Example configuration with custom template path:

```javascript
const issueManagementSystem = new IssueManagementSystem({
  templatePath: '/path/to/custom/templates',
  // Other configuration options...
});
```

## Future Improvements

Future improvements to the Issue Template System could include:

1. **Multiple Templates**: Support for multiple templates for different types of issues
2. **Template Variables**: Additional template variables for more customization
3. **Markdown Enhancements**: Support for advanced Markdown features like tables and code blocks
4. **HTML Templates**: Support for HTML templates for richer formatting
5. **Template Editor**: A web-based editor for creating and editing templates
